<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · FinanceModels.jl</title><meta name="title" content="Home · FinanceModels.jl"/><meta property="og:title" content="Home · FinanceModels.jl"/><meta property="twitter:title" content="Home · FinanceModels.jl"/><meta name="description" content="Documentation for FinanceModels.jl."/><meta property="og:description" content="Documentation for FinanceModels.jl."/><meta property="twitter:description" content="Documentation for FinanceModels.jl."/><meta property="og:url" content="https://JuliaActuary.github.io/FinanceModels.jl/"/><meta property="twitter:url" content="https://JuliaActuary.github.io/FinanceModels.jl/"/><link rel="canonical" href="https://JuliaActuary.github.io/FinanceModels.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.svg" alt="FinanceModels.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>FinanceModels.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#QuickStart"><span>QuickStart</span></a></li><li><a class="tocitem" href="#Overview-of-FinanceModels"><span>Overview of FinanceModels</span></a></li><li><a class="tocitem" href="#Guide-and-Documentation"><span>Guide and Documentation</span></a></li><li><a class="tocitem" href="#Exported-vs-Un-exported-Functions"><span>Exported vs Un-exported Functions</span></a></li><li><a class="tocitem" href="#Internals"><span>Internals</span></a></li><li><a class="tocitem" href="#Related-Packages"><span>Related Packages</span></a></li></ul></li><li><span class="tocitem">Guide</span><ul><li><a class="tocitem" href="introduction/">Introduction</a></li><li><a class="tocitem" href="models/">Models, Valuation, and Fitting</a></li><li><a class="tocitem" href="contracts/">Contracts</a></li><li><a class="tocitem" href="Rates/">Rates</a></li><li><a class="tocitem" href="migration/">Migration Guide</a></li></ul></li><li><span class="tocitem">Modules</span><ul><li><a class="tocitem" href="API/FinanceModels/">FinanceModels</a></li><li><a class="tocitem" href="API/FinanceCore/">FinanceCore</a></li><li><a class="tocitem" href="API/Spline/">Spline</a></li><li><a class="tocitem" href="API/Fit/">Fit</a></li><li><a class="tocitem" href="API/Yield/">Yield</a></li><li><a class="tocitem" href="API/Bond/">Bond</a></li><li><a class="tocitem" href="API/Equity/">Equity</a></li><li><a class="tocitem" href="API/Option/">Option</a></li><li><a class="tocitem" href="API/Volatility/">Volatility</a></li></ul></li><li><a class="tocitem" href="faq/">FAQs</a></li><li><a class="tocitem" href="extensions/">Extensions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaActuary/FinanceModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaActuary/FinanceModels.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="FinanceModels.jl"><a class="docs-heading-anchor" href="#FinanceModels.jl">FinanceModels.jl</a><a id="FinanceModels.jl-1"></a><a class="docs-heading-anchor-permalink" href="#FinanceModels.jl" title="Permalink"></a></h1><p><a href="https://JuliaActuary.github.io/FinanceModels.jl/stable"><img src="https://img.shields.io/badge/docs-stable-blue.svg" alt="Stable"/></a> <a href="https://JuliaActuary.github.io/FinanceModels.jl/dev"><img src="https://img.shields.io/badge/docs-dev-blue.svg" alt="Dev"/></a> <a href="https://github.com/JuliaActuary/FinanceModels.jl/actions"><img src="https://github.com/JuliaActuary/FinanceModels.jl/workflows/CI/badge.svg" alt="Build Status"/></a> <a href="https://codecov.io/gh/JuliaActuary/FinanceModels.jl"><img src="https://codecov.io/gh/JuliaActuary/FinanceModels.jl/branch/master/graph/badge.svg" alt="Coverage"/></a></p><p><strong>FinanceModels.jl</strong> provides a set of composable contracts, models, and functions that allow for modeling of both simple and complex financial instruments. The resulting models, such as discount rates or term structures, can then be used across the JuliaActuary ecosystem to perform actuarial and financial analysis.</p><p>Additionally, the models can be used to project contracts through time: most basically as a series of cashflows but more complex output can be defined for contracts.</p><p><img src="https://github.com/JuliaActuary/FinanceModels.jl/assets/711879/9a304448-c31c-4766-b2ba-6433a77fa12c" alt="anim_fps2"/></p><h2 id="QuickStart"><a class="docs-heading-anchor" href="#QuickStart">QuickStart</a><a id="QuickStart-1"></a><a class="docs-heading-anchor-permalink" href="#QuickStart" title="Permalink"></a></h2><pre><code class="language-julia hljs">using FinanceModels

# a set of market-observed prices we wish to calibrate the model to
# annual effective unless otherwise specified
q_rate = ZCBYield([0.01,0.02,0.03]);
q_spread = ZCBYield([0.01,0.01,0.01]);

# bootstrap a linear spline yield model
model_rate = fit(Spline.Linear(),q_rate,Fit.Bootstrap());⠀           
model_spread = fit(Spline.Linear(),q_spread,Fit.Bootstrap());

# the zero rate is the combination of the two underlying rates
zero(m_spread + m_rate,1) # 0.02 annual effective rate 

# the discount is the same as if we added the underlying zero rates
discount(m_spread + m_rate,0,3) ≈ discount(0.01 + 0.03,3)   # true

# compute the present value of a contract (a cashflow of 10 at time 3)
present_value(m_rate,Cashflow(10,3)) # 9.15...</code></pre><h2 id="Overview-of-FinanceModels"><a class="docs-heading-anchor" href="#Overview-of-FinanceModels">Overview of FinanceModels</a><a id="Overview-of-FinanceModels-1"></a><a class="docs-heading-anchor-permalink" href="#Overview-of-FinanceModels" title="Permalink"></a></h2><p><img src="assets/relations.png" alt="A conceptual sketch of FinanceModels.jl"/></p><p>Often we start with observed or assumed values for existing contracts. We want to then use those assumed values to extend the valuation logic to new contracts. For example, we may have a set of bond yields which we then want to discount a series of insurance obligations.</p><p>In the language of FinanceModels, we would have a set of <code>Quote</code>s which are used to fit a <code>Model</code>. That model is then used to <code>discount</code> a new series of cashflows.</p><p>That&#39;s just an example, and we can use the various components in different ways depending on the objective of the analysis.</p><h3 id="Contracts-and-Quotes"><a class="docs-heading-anchor" href="#Contracts-and-Quotes">Contracts and Quotes</a><a id="Contracts-and-Quotes-1"></a><a class="docs-heading-anchor-permalink" href="#Contracts-and-Quotes" title="Permalink"></a></h3><p>Contracts are a way to represent financial obligations. These can be valued using a model, projected into a future steam of values, or combined with assumed prices as a <code>Quote</code>.</p><p>Included are a number of primitives and convenience methods for contracts:</p><p>Existing <code>struct</code>s:</p><ul><li><code>Cashflow</code></li><li><code>Bond.Fixed</code></li><li><code>Bond.Floating</code></li><li><code>Forward</code> (an obligation with a forward start time)</li><li><code>Composite</code> (combine two other contracts, e.g. into a swap)</li><li><code>EuroCall</code></li><li><code>CommonEquity</code></li></ul><p>Commonly, we deal with conventions that imply a contract and an observed price. For example, we may talk about a treasury yield of <code>0.03</code>. This is a description that implies a <code>Quote</code>ed price for an underling fixed bond. In FinanceModels, we could use <code>CMTYield(rate,tenor)</code> which would create a <code>Quote(price,Bond.Fixed(...))</code>. In this way, we can conveniently create a number of <code>Quote</code>s which can be used to fit models. Such convenience methods include:</p><ul><li><code>ZCBYield</code></li><li><code>ZCBPrice</code></li><li><code>CMTYield</code></li><li><code>ParYield</code></li><li><code>ParSwapYield</code></li><li><code>ForwardYield</code></li></ul><p>FinanceModels offers a way to define new contracts as well.</p><h4 id="Cashflows"><a class="docs-heading-anchor" href="#Cashflows">Cashflows</a><a id="Cashflows-1"></a><a class="docs-heading-anchor-permalink" href="#Cashflows" title="Permalink"></a></h4><p>A <code>Cashflow</code>s obligation are themselves a contract, but other contracts can be considered as essentially anything that can be combined with assumptions (a <strong>model</strong>) to derive a collection of cashflows.</p><p>For example, a obligation that pays 1.75 at time 2 could be represented as: <code>Cashflow(1.75,2)</code>. </p><h3 id="Models"><a class="docs-heading-anchor" href="#Models">Models</a><a id="Models-1"></a><a class="docs-heading-anchor-permalink" href="#Models" title="Permalink"></a></h3><p>Models are objects that can be fit to observed prices and then subsequently used to make valuations of other cashflows/contracts.</p><p>Yield models include:</p><ul><li><code>Yield.Constant</code></li><li>Bootstrapped <code>Spline</code>s</li><li><code>Yield.SmithWilson</code></li><li><code>Yield.NelsonSiegel</code></li><li><code>Yield.NelsonSiegelSvensson</code></li></ul><h4 id="Yield-related-functions"><a class="docs-heading-anchor" href="#Yield-related-functions">Yield-related functions</a><a id="Yield-related-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Yield-related-functions" title="Permalink"></a></h4><p>The models can be used to compute various rates of interest:</p><ul><li><code>discount(curve,from,to)</code> or <code>discount(curve,to)</code> gives the discount factor</li><li><code>accumulation(curve,from,to)</code> or <code>accumulation(curve,to)</code> gives the accumulation factor</li><li><code>zero(curve,time)</code> or <code>zero(curve,time,Frequency)</code> gives the zero-coupon spot rate for the given time.</li><li><code>forward(curve,from,to)</code> gives the zero rate between the two given times</li><li><code>par(curve,time;frequency=2)</code> gives the coupon-paying par equivalent rate for the given time.</li></ul><p>Other models include:</p><ul><li><code>BlackScholesMerton</code> derivative valuation</li></ul><h5 id="Plotting-of-Yield-Curves"><a class="docs-heading-anchor" href="#Plotting-of-Yield-Curves">Plotting of Yield Curves</a><a id="Plotting-of-Yield-Curves-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-of-Yield-Curves" title="Permalink"></a></h5><p>In interactive sessions (e.g. REPL, Notebooks, VS Code, etc.) you can get a pretty printing of yield curves by also using <code>UnicodePlots.jl</code>, for example:</p><pre><code class="language-julia-repl hljs">julia&gt; using FinanceModels
julia&gt; q_rate = ZCBYield.([0.01, 0.02, 0.03,0.04,0.03],[1,3,5,10,20]);
julia&gt; fit(Spline.PolynomialSpline(3), q_rate, Fit.Bootstrap())
FinanceModels.Yield.Spline{DataInterpolations.CubicSpline{Vector{Float64}, Vector{Float64}, Vector{Float64}, Vector{Float64}, true, Float64}}([0.009950330853168092, 0.009950330853168092, 0.019802627296179747, 0.02955880224154443, 0.0, 1.0, 2.0, 3.0])

julia&gt; using UnicodePlots 
julia&gt; fit(Spline.PolynomialSpline(3), q_rate, Fit.Bootstrap()) # after importing UnicodePlots
              ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀Yield Curve (FinanceModels.Yield.Spline)⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀           
              ┌────────────────────────────────────────────────────────────┐           
         0.04 │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⠤⠖⠒⠊⠉⠉⠉⠒⠒⠢⠤⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│ Zero rates
              │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⠔⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠑⠒⢄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠖⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠑⠢⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡔⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠒⢄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              │⠀⠀⠀⠀⠀⠀⠀⠀⢠⠎⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠓⠤⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              │⠀⠀⠀⠀⠀⠀⠀⢠⠎⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠑⠦⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              │⠀⠀⠀⠀⠀⠀⢠⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠓⠦⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀│           
   Continuous │⠀⠀⠀⠀⠀⢠⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠒⠒⠦⠤⠤⠤⠤│           
              │⠀⠀⠀⠀⢀⠎⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              │⠀⠀⠀⢀⡎⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              │⠀⠀⢀⠎⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              │⠒⠒⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
            0 │⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│           
              └────────────────────────────────────────────────────────────┘           
              ⠀0⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀time⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀30⠀           
</code></pre><blockquote><p>[!NOTE] This was built-in prior to v4.9 of FinanceModels. It has been split out to materially speed up <code>using FinanceModels</code>.</p></blockquote><h3 id="Projections"><a class="docs-heading-anchor" href="#Projections">Projections</a><a id="Projections-1"></a><a class="docs-heading-anchor-permalink" href="#Projections" title="Permalink"></a></h3><p>Most basically, we can project a contract into a series of <code>Cashflow</code>s: </p><pre><code class="language-julia-repl hljs">julia&gt; b = Bond.Fixed(0.04,Periodic(2),3)
FinanceModels.Bond.Fixed{Periodic, Float64, Int64}(0.04, Periodic(2), 3)

julia&gt; collect(b)
6-element Vector{Cashflow{Float64, Float64}}:
 Cashflow{Float64, Float64}(0.02, 0.5)
 Cashflow{Float64, Float64}(0.02, 1.0)
 Cashflow{Float64, Float64}(0.02, 1.5)
 Cashflow{Float64, Float64}(0.02, 2.0)
 Cashflow{Float64, Float64}(0.02, 2.5)
 Cashflow{Float64, Float64}(1.02, 3.0)</code></pre><p>However, <code>Projection</code>s allow one to combine three elements which can be extended to define any desired output (such as amortization schedules, financial statement projections, or account value rollforwards). The three elements are:</p><ul><li>the underlying <strong>contract</strong> of interest</li><li>the <strong>model</strong> which includes assumptions of how the contract will behave</li><li>a <code>ProjectionKind</code> which indicates the kind of output desired (cashflow stream, amortization schedule, etc...)</li></ul><h4 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h4><p>A fixed bond that needs no valuation model (<code>NullModel()</code>) to define its projected gross cashflows:</p><pre><code class="language-julia hljs">Projection(Bond.Fixed(0.04,Periodic(2),3),NullModel(),CashflowProjection())</code></pre><h4 id="Plotting-Projections"><a class="docs-heading-anchor" href="#Plotting-Projections">Plotting Projections</a><a id="Plotting-Projections-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-Projections" title="Permalink"></a></h4><p>A <code>CashflowProjection</code> or a vector of <code>Cashflow</code>s can be plotted with the <a href="https://makie.org/">Makie</a> family of plotting packages.</p><pre><code class="language-julia hljs">using FinanceModels, CairoMakie
proj = Projection(Bond.Fixed(0.10,Periodic(2),20),NullModel(),CashflowProjection())
# a stem plot:
stem(proj)</code></pre><p>Will produce: </p><p><img src="https://github.com/JuliaActuary/ActuaryUtilities.jl/assets/711879/29480ce2-9691-4eb5-b656-a05394f7a2c2" alt="A stem plot of bond cashflows"/></p><h3 id="Fitting-Models"><a class="docs-heading-anchor" href="#Fitting-Models">Fitting Models</a><a id="Fitting-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Fitting-Models" title="Permalink"></a></h3><h3 id="Fitting-Models-2"><a class="docs-heading-anchor" href="#Fitting-Models-2">Fitting Models</a><a class="docs-heading-anchor-permalink" href="#Fitting-Models-2" title="Permalink"></a></h3><pre><code class="language-plaintext hljs">       Model                                                               Method
          |                                                                   |
  	|------------|                                                     |---------------|
fit(Spline.Cubic(), CMTYield.([0.04,0.05,0.055,0.06,0055],[1,2,3,4,5]), Fit.Bootstrap())
                    |-------------------------------------------------|
                                              |
                                              Quotes</code></pre><ul><li><strong>Model</strong> could be <code>Spline.Linear()</code>, <code>Yield.NelsonSiegelSvensson()</code>, <code>Equity.BlackScholesMerton(...)</code>, etc.</li><li><strong>Quote</strong> could be <code>CMTYield</code>s, <code>ParYield</code>s, <code>Option.Eurocall</code>, etc.</li><li><strong>Method</strong> could be <code>Fit.Loss(x-&gt;x^2)</code>, <code>Fit.Loss(x-&gt;abs(x))</code>, <code>Fit.Bootstrap()</code>, etc.</li></ul><p>This unified way to fit models offers a much simpler way to extend functionality to new models or contract types.</p><h4 id="Using-Models"><a class="docs-heading-anchor" href="#Using-Models">Using Models</a><a id="Using-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Models" title="Permalink"></a></h4><p>After being fit, models can be used to value contracts:</p><pre><code class="language-julia hljs">present_value(model,cashflows)</code></pre><p>Additionally, <a href="https://github.com/JuliaActuary/ActuaryUtilities.jl">ActuaryUtilities.jl</a> offers a number of other methods that can be used, such as <code>duration</code>, <code>convexity</code>, <code>price</code> which can be used for analysis with the fitted models.</p><h3 id="Rates"><a class="docs-heading-anchor" href="#Rates">Rates</a><a id="Rates-1"></a><a class="docs-heading-anchor-permalink" href="#Rates" title="Permalink"></a></h3><p>Rates are types that wrap scalar values to provide information about how to determine <code>discount</code> and <code>accumulation</code> factors.</p><p>There are two <code>Frequency</code> types:</p><ul><li><code>Periodic(m)</code> for rates that compound <code>m</code> times per period (e.g. <code>m</code> times per year if working with annual rates).</li><li><code>Continuous()</code> for continuously compounding rates.</li></ul><h4 id="Examples-2"><a class="docs-heading-anchor" href="#Examples-2">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-2" title="Permalink"></a></h4><pre><code class="language-julia hljs">Continuous(0.05)       # 5% continuously compounded
Periodic(0.05,2)       # 5% compounded twice per period</code></pre><p>These are both subtypes of the parent <code>Rate</code> type and are instantiated as:</p><pre><code class="language-julia hljs">Rate(0.05,Continuous())       # 5% continuously compounded
Rate(0.05,Periodic(2))        # 5% compounded twice per period</code></pre><p>Rates can also be constructed by specifying the <code>Frequency</code> and then passing a scalar rate:</p><pre><code class="language-julia hljs">Periodic(1)(0.05)
Continuous()(0.05)</code></pre><h4 id="Conversion"><a class="docs-heading-anchor" href="#Conversion">Conversion</a><a id="Conversion-1"></a><a class="docs-heading-anchor-permalink" href="#Conversion" title="Permalink"></a></h4><p>Convert rates between different types with <code>convert</code>. E.g.:</p><pre><code class="language-julia-repl hljs">r = Rate(FinanceModels.Periodic(12),0.01)             # rate that compounds 12 times per rate period (ie monthly)

convert(FinanceModels.Periodic(1),r)                  # convert monthly rate to annual effective
convert(FinanceModels.Continuous(),r)          # convert monthly rate to continuous</code></pre><h4 id="Arithmetic"><a class="docs-heading-anchor" href="#Arithmetic">Arithmetic</a><a id="Arithmetic-1"></a><a class="docs-heading-anchor-permalink" href="#Arithmetic" title="Permalink"></a></h4><p>Adding, substracting, multiplying, dividing, and comparing rates is supported.</p><h2 id="Guide-and-Documentation"><a class="docs-heading-anchor" href="#Guide-and-Documentation">Guide and Documentation</a><a id="Guide-and-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Guide-and-Documentation" title="Permalink"></a></h2><p>A guide which explains more about the components of the package and from-scratch examples of extending the package is available in the <a href="https://juliaactuary.github.io/FinanceModels.jl/dev/">documenation</a></p><h2 id="Exported-vs-Un-exported-Functions"><a class="docs-heading-anchor" href="#Exported-vs-Un-exported-Functions">Exported vs Un-exported Functions</a><a id="Exported-vs-Un-exported-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Exported-vs-Un-exported-Functions" title="Permalink"></a></h2><p>Generally, CamelCase methods which construct a datatype are exported as they are unlikely to conflict with other parts of code that may be written. For example, <code>rate</code> is un-exported (it must be called with <code>FinanceModels.rate(...)</code>) because <code>rate</code> is likely a very commonly defined variable within actuarial and financial contexts and there is a high risk of conflicting with defined variables.</p><p>Consider using <code>import FinanceModels</code> which would require qualifying all methods, but alleviates any namespace conflicts and has the benefit of being explicit about the calls (internally we prefer this in the package design to keep dependencies and their usage clear). </p><h2 id="Internals"><a class="docs-heading-anchor" href="#Internals">Internals</a><a id="Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Internals" title="Permalink"></a></h2><p>For time-variant FinanceModels (ie yield <em>curves</em>), the inputs are converted to spot rates and interpolated using quadratic B-splines by default (see documentation for alternatives, such as linear interpolations).</p><h3 id="Combination-Implementation"><a class="docs-heading-anchor" href="#Combination-Implementation">Combination Implementation</a><a id="Combination-Implementation-1"></a><a class="docs-heading-anchor-permalink" href="#Combination-Implementation" title="Permalink"></a></h3><p><a href="#combinations">Combinations</a> track two different curve objects and are not combined into a single underlying data structure. This means that you may achieve better performance if you combine the rates before constructing a <code>FinanceModels</code> representation. The exception to this is <code>Constant</code> curves, which <em>do</em> get combined into a single structure that is as performant as pre-combined rate structure.</p><h2 id="Related-Packages"><a class="docs-heading-anchor" href="#Related-Packages">Related Packages</a><a id="Related-Packages-1"></a><a class="docs-heading-anchor-permalink" href="#Related-Packages" title="Permalink"></a></h2><ul><li><a href="https://github.com/felipenoris/InterestRates.jl"><strong><code>InterestRates.jl</code></strong></a> specializes in fast rate calculations aimed at valuing fixed income contracts, with business-day-level accuracy.<ul><li>Comparative comments: <strong><code>FinanceModels.jl</code></strong> does not try to provide as precise controls over the timing, structure, and interpolation of the curve. Instead, <strong><code>FinanceModels.jl</code></strong> provides a minimal, but flexible and intuitive interface for common modeling needs.</li></ul></li></ul></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="introduction/">Introduction »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Saturday 25 May 2024 04:29">Saturday 25 May 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
